@model IEnumerable<SinetLeaveManagement.Models.LeaveRequest>

<h4>Leave History</h4>

<!-- Search & Export Form -->
<form asp-action="LeaveHistory" method="get" class="form-inline mb-3">
    <input type="text" name="search" value="@Context.Request.Query["search"]"
           class="form-control me-2" placeholder="Search by reason or status">
    <button type="submit" class="btn btn-primary me-2">
        <i class="bi bi-search"></i> Search
    </button>
    <a asp-action="ExportFilteredToExcel" asp-route-search="@Context.Request.Query["search"]"
       class="btn btn-success me-2">
        <i class="bi bi-file-earmark-spreadsheet"></i> Export Filtered to Excel
    </a>
    <a asp-action="ExportFilteredToPdf" asp-route-search="@Context.Request.Query["search"]"
       class="btn btn-danger">
        <i class="bi bi-file-earmark-pdf"></i> Export Filtered to PDF
    </a>
</form>

<table class="table table-striped table-bordered">
    <thead class="thead-dark">
        <tr>
            <th>Reason</th>
            <th>Start</th>
            <th>End</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@item.Reason</td>
                <td>@item.StartDate.ToShortDateString()</td>
                <td>@item.EndDate.ToShortDateString()</td>
                <td>
                    <span class="badge
                            @(item.Status == "Approved" ? "bg-success" :
                                                    item.Status == "Rejected" ? "bg-danger" : "bg-warning text-dark")">
                    @item.Status
                </span>
            </td>
        </tr>
                }
    </tbody>
</table>
